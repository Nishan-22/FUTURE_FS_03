{% extends 'restaurant/base.html' %}

{% block title %}Submit a Review - Sky Food Corner{% endblock %}

{% block content %}
    <h1 class="text-3xl font-bold text-red-700 text-center mb-6">Submit a Review</h1>

    {% if messages %}
        <ul class="mb-4">
            {% for message in messages %}
                <li class="p-3 mb-2 rounded {% if message.tags == 'error' %}bg-red-100 text-red-800{% elif message.tags == 'success' %}bg-green-100 text-green-800{% else %}bg-blue-100 text-blue-800{% endif %}">
                    {{ message }}
                </li>
            {% endfor %}
        </ul>
    {% endif %}

    <form method="post" action="{% url 'submit_review' %}" class="max-w-md mx-auto p-6 bg-white rounded-lg shadow-md">
        {% csrf_token %}
        <div class="mb-4">
            <label for="id_menu_item" class="block text-gray-700 text-sm font-bold mb-2">Menu Item:</label>
            <select id="id_menu_item" name="menu_item" required
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option value="">Select an item</option>
                {% for item in menu_items %}
                    <option value="{{ item.id }}" {% if item.id|stringformat:"s" == posted_data.menu_item %}selected{% endif %}>{{ item.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-4">
            <label for="id_rating" class="block text-gray-700 text-sm font-bold mb-2">Rating:</label>
            <select id="id_rating" name="rating" required
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                <option value="">Select a rating</option>
                {% for i in "12345"|make_list %}
                    <option value="{{ i }}" {% if i|stringformat:"s" == posted_data.rating %}selected{% endif %}>{{ i }} Star{{ i|pluralize }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="mb-6">
            <label for="id_comment" class="block text-gray-700 text-sm font-bold mb-2">Comment (Optional):</label>
            <textarea id="id_comment" name="comment" rows="6"
                      class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">{{ posted_data.comment }}</textarea>
        </div>

        <div class="flex items-center justify-between">
            <button type="submit"
                    class="bg-red-700 hover:bg-red-800 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full">
                Submit Review
            </button>
        </div>
    </form>

    <div class="text-center mt-6">
        <a href="{% url 'home' %}" class="text-blue-500 hover:text-blue-800 inline-block font-bold">Back to Home</a>
    </div>
{% endblock %}